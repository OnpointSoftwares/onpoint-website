{% extends 'base.html' %}
{% block title %}Leaderboard{% endblock %}
{% block content %}
<div class="container py-4">
  <div class="d-flex align-items-center justify-content-between mb-3">
    <h1 class="h4 mb-0"><i class="bi bi-trophy me-2 text-warning"></i>Leaderboard</h1>
    <a href="{% url 'coding_challenges:dashboard' %}" class="btn btn-outline-secondary btn-sm">Back to Challenges</a>
  </div>
  <div class="card shadow-sm border-0">
    <div class="table-responsive">
      <table class="table align-middle mb-0">
        <thead class="table-light">
          <tr>
            <th style="width:60px;">Rank</th>
            <th>User</th>
            <th>Points</th>
            <th>Solved</th>
            <th>Badges</th>
            <th>Last Activity</th>
          </tr>
        </thead>
        <tbody>
          {% for p in profiles %}
            <tr>
              <td class="fw-bold">#{{ forloop.counter }}</td>
              <td>{{ p.user.username }}</td>
              <td><span class="badge bg-primary">{{ p.points }}</span></td>
              <td>{{ p.solved_count }}</td>
              <td>
                {% for b in p.badges.all %}
                  <span class="badge bg-light text-dark border me-1"><i class="bi bi-award me-1 text-warning"></i>{{ b.name }}</span>
                {% empty %}<span class="text-muted small">None</span>{% endfor %}
              </td>
              <td class="text-muted small">{{ p.last_activity|timesince }} ago</td>
            </tr>
          {% empty %}
            <tr><td colspan="6" class="text-center text-muted">No data yet.</td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}
