{% extends 'admin/base.html' %}
{% load static %}

{% block title %}Challenge Details - OnPoint Admin{% endblock %}

{% block content %}
<div class="container-fluid">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <div>
      <h2 class="mb-1"><i class="bi bi-trophy me-2"></i>{{ challenge.title }}</h2>
      <div class="text-muted">Created {{ challenge.created_at|date:'Y-m-d H:i' }}</div>
    </div>
    <div class="d-flex gap-2">
      <a href="{% url 'admin_challenge_update' challenge.pk %}" class="btn btn-outline-primary"><i class="bi bi-pencil me-1"></i>Edit</a>
      <a href="{% url 'admin_challenge_detail' challenge.pk %}?action=toggle" class="btn btn-outline-secondary">
        {% if challenge.active %}<i class="bi bi-toggle-on me-1"></i>Deactivate{% else %}<i class="bi bi-toggle-off me-1"></i>Activate{% endif %}
      </a>
      <a href="{% url 'admin_challenge_delete' challenge.pk %}" class="btn btn-outline-danger"><i class="bi bi-trash me-1"></i>Delete</a>
      <a href="{% url 'admin_challenge_list' %}" class="btn btn-light"><i class="bi bi-arrow-left me-1"></i>Back</a>
    </div>
  </div>

  <div class="row g-3">
    <div class="col-lg-8">
      <div class="card shadow-sm">
        <div class="card-body">
          <h5 class="card-title mb-3">Description</h5>
          <div class="prose">{{ challenge.description|linebreaks }}</div>
        </div>
      </div>
    </div>
    <div class="col-lg-4">
      <div class="card shadow-sm mb-3">
        <div class="card-body">
          <h6 class="text-uppercase text-muted mb-3">Metadata</h6>
          <div class="d-flex justify-content-between mb-2"><span>Difficulty</span>
            <span class="badge {% if challenge.difficulty == 'easy' %}bg-success{% elif challenge.difficulty == 'medium' %}bg-warning text-dark{% else %}bg-danger{% endif %}">{{ challenge.difficulty|title }}</span>
          </div>
          <div class="d-flex justify-content-between mb-2"><span>Points</span><span class="fw-semibold">{{ challenge.points }}</span></div>
          <div class="d-flex justify-content-between mb-2"><span>Status</span>
            {% if challenge.active %}<span class="badge bg-success">Active</span>{% else %}<span class="badge bg-secondary">Inactive</span>{% endif %}
          </div>
          <div class="d-flex justify-content-between mb-2"><span>Start</span><span>{{ challenge.start_at|date:'Y-m-d H:i'|default:'—' }}</span></div>
          <div class="d-flex justify-content-between"><span>End</span><span>{{ challenge.end_at|date:'Y-m-d H:i'|default:'—' }}</span></div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
